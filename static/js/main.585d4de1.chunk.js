(this["webpackJsonptoxic-jar"]=this["webpackJsonptoxic-jar"]||[]).push([[0],{14:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},17:function(e,t,a){e.exports=a(30)},22:function(e,t,a){},23:function(e,t,a){var n=a(24).db;e.exports={getUsers:function(e){var t=[];n.collection("prueba").orderBy("userName").get().then((function(e){return e.docs.forEach((function(e){t.push(e.data())})),t})).then((function(t){return e(t)}))},updateUsers:function(e,t){n.collection("prueba").where("userName","==",e).get().then((function(e){var a=n.collection("prueba").doc(e.docs[0].id),l=e.docs[0].data().debt;a.update({debt:l+t})}))},clearDebt:function(e){var t=e.map((function(e){return e.userName}));n.collection("prueba").get().then((function(e){e.docs.forEach((function(e){t.forEach((function(t){e.data().userName===t&&n.collection("prueba").doc(e.id).update({debt:0})}))}))}))}}},24:function(e,t,a){var n=a(25);a(26);n.initializeApp({apiKey:"AIzaSyDM9EuZwEyYTCS7obD6QSgUhI_69C-GHpk",authDomain:"toxic-jar-api.firebaseapp.com",databaseURL:"https://toxic-jar-api.firebaseio.com",projectId:"toxic-jar-api",storageBucket:"toxic-jar-api.appspot.com",messagingSenderId:"951909825290",appId:"1:951909825290:web:72d8a1c10fab4c206a18f3",measurementId:"G-1QFET2KR4E"});var l=n.firestore();e.exports={db:l}},3:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),o=a(10),s=a.n(o),r=(a(22),a(11)),c=a(12),i=a(15),u=a(13),d=a(1),m=a(16),h=a(14),b=a.n(h);a(3);var f=function(e){function t(t){var a=t.target.value,n=t.target.parentNode;e.handleUserClick(a),n.classList.add("user-selected"),n.children[2].classList.remove("hide")}function a(t){var a=t.target.parentNode.parentNode.parentNode.children[0].value;e.handleClearClick(t,a)}return l.a.createElement("div",{className:"users"},e.users.map((function(e,n){return l.a.createElement("div",{className:"test",key:n},l.a.createElement("input",{type:"radio",id:n,name:"user",value:e.userName,onClick:t}),l.a.createElement("label",{htmlFor:n},e.userName),e.debt?l.a.createElement("p",{className:"userDebt hide"},l.a.createElement("small",null,"This fat fuck owes ",e.debt.toFixed(2)," \u20ac ",l.a.createElement("button",{className:"clearUserDebt",onClick:a},"Clear Debt"))):l.a.createElement("p",{className:"empty"}))})))};var p=function(e){function t(t){t.preventDefault();var a=t.target.value,n=document.querySelectorAll(".money button"),l=t.target;n.forEach((function(e){e.classList.remove("amount-selected")})),l.classList.add("amount-selected"),e.handleAmountClick(a)}return l.a.createElement("div",{className:"money"},l.a.createElement("button",{onClick:t,value:"0.25"},"0.25\u20ac"),l.a.createElement("button",{onClick:t,value:"0.5"},"0.50\u20ac"),l.a.createElement("button",{onClick:t,value:"1"},"1.00\u20ac"))};var v=function(e){return e.show?l.a.createElement("div",{className:"backdrop",style:{position:"fixed",top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50}},l.a.createElement("div",{className:"modal",style:{backgroundColor:"#fff",borderRadius:5,margin:"0 auto",padding:30}},l.a.createElement("h2",null,"This is how much each of you pieces of shit owe:"),l.a.createElement("ul",{className:"modalUserList"},e.userData.map((function(e,t){return l.a.createElement("li",{key:t},e.userName," - ",e.debt.toFixed(2)," \u20ac")}))),l.a.createElement("div",{className:"footer"},l.a.createElement("button",{onClick:e.onClose},"Close")))):null},k=a(23),E=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={users:[],selectedUserName:null,selectedAmount:null,totalAmount:0,disableSubmitBtn:!0,isModalOpen:!1},a.handleUserClick=a.handleUserClick.bind(Object(d.a)(a)),a.handleAmountClick=a.handleAmountClick.bind(Object(d.a)(a)),a.handleInsertBtn=a.handleInsertBtn.bind(Object(d.a)(a)),a.enableSubmit=a.enableSubmit.bind(Object(d.a)(a)),a.toggleModal=a.toggleModal.bind(Object(d.a)(a)),a.handleClearClick=a.handleClearClick.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;k.getUsers((function(t){var a=0;t.forEach((function(e){return a+=e.debt})),e.setState({users:t,totalAmount:a})})),this.closeModalWhenClickingOutside()}},{key:"closeModalWhenClickingOutside",value:function(){var e=this;window.addEventListener("click",(function(t){var a=document.querySelector(".backdrop");t.target===a&&e.setState({isModalOpen:!e.state.isModalOpen})}))}},{key:"handleUserClick",value:function(e){var t=this;C(),this.setState({selectedUserName:e},(function(){t.enableSubmit()}))}},{key:"handleAmountClick",value:function(e){var t=this;this.setState({selectedAmount:e},(function(){t.enableSubmit()}))}},{key:"handleInsertBtn",value:function(e){e.preventDefault();var t=this.state.selectedUserName,a=Number(this.state.selectedAmount),n=Number(this.state.totalAmount),l=this.state.users,o=document.querySelector('input[value="'.concat(t,'"]')),s=document.querySelector('button[value="'.concat(a,'"]'));C(),s.classList.remove("amount-selected"),o.checked=!1,l.forEach((function(e){e.userName===t&&(e.debt+=a,n+=a)})),k.updateUsers(t,a),this.setState({users:l,totalAmount:n,selectedUserName:null,selectedAmount:null,disableSubmitBtn:!0})}},{key:"enableSubmit",value:function(){var e,t,a=(e=this.state.selectedUserName,t=this.state.selectedAmount,!e||!t);this.setState({disableSubmitBtn:a})}},{key:"toggleModal",value:function(e){e.preventDefault(),this.setState({isModalOpen:!this.state.isModalOpen})}},{key:"clearUserDebt",value:function(e){var t=this.state.totalAmount,a=this.state.users,n=e||a;k.clearDebt(n),a.forEach((function(a){(n.length>1||a.userName===e[0].userName)&&(t-=a.debt,a.debt=0)})),this.setState({users:a,totalAmount:t})}},{key:"handleClearClick",value:function(e,t){var a=this;e.preventDefault();var n=this.state.users;if(!t)return this.clearUserDebt();n.forEach((function(e){if(e.userName===t)return a.clearUserDebt([e])}))}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),l.a.createElement("h1",null,"QA TEAM"),l.a.createElement("button",{id:"moreInfo",onClick:this.toggleModal},l.a.createElement("small",null,"Click to see more info")),l.a.createElement("form",null,l.a.createElement("h1",{id:"totalAmount"},"Total debt: ",this.state.totalAmount.toFixed(2)," \u20ac"),l.a.createElement("button",{id:"clearAllDebt",onClick:this.handleClearClick},l.a.createElement("small",null,"Clear all debt")),l.a.createElement(v,{show:this.state.isModalOpen,onClose:this.toggleModal,userData:this.state.users}),l.a.createElement("p",null,"Please select the toxic user:"),l.a.createElement(f,{users:this.state.users,handleUserClick:this.handleUserClick,handleClearClick:this.handleClearClick}),l.a.createElement(p,{handleAmountClick:this.handleAmountClick}),l.a.createElement("div",null,l.a.createElement("button",{id:"sendButton",onClick:this.handleInsertBtn,disabled:this.state.disableSubmitBtn},"Submit"))))}}]),t}(l.a.Component);function C(){document.querySelectorAll(".users div").forEach((function(e){e.classList.remove("user-selected"),e.children[2].classList.add("hide")}))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.585d4de1.chunk.js.map